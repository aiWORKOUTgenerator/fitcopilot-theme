# Component Story Testing Guide

This document provides a detailed methodology for testing component stories in Storybook, with a particular focus on theme support. Use this guide alongside the `test-storybook-components.sh` script to ensure comprehensive testing.

## Testing Process Overview

1. **Run the testing script**: `./scripts/test-storybook-components.sh`
2. **Start Storybook**: `npm run storybook`
3. **Test each component** systematically using this guide
4. **Record results** in the log file generated by the script
5. **Complete the test report** using the template

## Theme Support Testing

Theme support is a critical aspect of our component library. FitCopilot supports multiple themes that should be consistently applied across all components.

### Testing Steps for Themes

For each component:

1. **Verify Theme Selector**: Use the theme selector in the Storybook toolbar to switch between themes
   - Default
   - Gym
   - Sports
   - Wellness
   - Nutrition

2. **Check ThemeShowcase Story**: If the component has a `ThemeShowcase` story, verify:
   - All themes are displayed
   - Each theme properly applies styling
   - No visual artifacts or inconsistencies between themes

3. **Verify CSS Variables**:
   - Open browser DevTools
   - Inspect element styles
   - Confirm theme-specific CSS variables are applied (e.g., `--color-primary`)
   - Verify no hardcoded color values override theme variables

4. **Test Theme Attributes**:
   - Verify `data-theme` attribute is properly applied to the component container
   - Check that child components inherit theme properly

### Common Theme Issues to Look For

- Colors not changing between themes
- Incorrect contrast between text and background
- Inconsistent element spacing
- Hardcoded colors that don't respect theme variables
- Theme-specific features not displaying correctly

## Responsive Testing

Components should be responsive across various viewport sizes.

### Testing Steps for Responsiveness

1. **Use Viewport Toolbar**: Switch between different viewport sizes:
   - Mobile (small - 320px)
   - Mobile (large - 414px)
   - Tablet (768px)
   - Desktop (1280px+)

2. **Check Responsive Behavior**:
   - Verify layouts adjust appropriately
   - Text remains readable
   - Images scale correctly
   - Interactive elements remain usable

## Controls Testing

Controls allow interaction with component props to test different states.

### Testing Steps for Controls

1. **Verify Controls Panel**:
   - All documented props have appropriate controls
   - Controls are correctly typed (boolean, select, text, etc.)
   - Control changes are reflected in the component

2. **Test Edge Cases**:
   - Empty strings
   - Maximum/minimum values
   - Toggle boolean props
   - Multiple combination states

## Documentation Testing

Proper documentation is essential for component usage.

### Testing Steps for Documentation

1. **Check Docs Tab**:
   - Component has a clear description
   - All props are documented with types and descriptions
   - Usage examples are provided if needed
   - No TypeScript errors or warnings

2. **Verify Auto-Docs Generation**:
   - Props table is complete and accurate
   - Stories are displayed in the docs

## Using the Testing Checklist

For each component, complete the following checklist:

| Aspect | Criteria | Pass/Fail |
|--------|----------|-----------|
| **Theme Support** | All themes display correctly | ✅ / ❌ |
| | Color variables applied properly | ✅ / ❌ |
| | Theme switching works | ✅ / ❌ |
| | ThemeShowcase story present (if applicable) | ✅ / ❌ |
| **Responsive** | Displays correctly at all viewports | ✅ / ❌ |
| | Touch targets adequate on mobile | ✅ / ❌ |
| | No overflow issues | ✅ / ❌ |
| **Controls** | All props have controls | ✅ / ❌ |
| | Controls correctly affect component | ✅ / ❌ |
| | Edge cases handled | ✅ / ❌ |
| **Documentation** | Clear component description | ✅ / ❌ |
| | All props documented | ✅ / ❌ |
| | Usage examples provided | ✅ / ❌ |

## Recording Test Results

Update the testing log file with your results:

- ✅ for passing tests
- ❌ for failing tests with issues noted
- ⚠️ for partial passing with minor issues

Example:

```markdown
| Component | Theme Support | Responsive | Controls | Documentation | Issues |
|-----------|---------------|------------|----------|---------------|--------|
| Button    | ✅            | ✅         | ✅       | ✅            |        |
| Card      | ⚠️            | ✅         | ✅       | ✅            | Theme colors not consistent in dark mode |
| FormField | ❌            | ✅         | ⚠️       | ✅            | Theme not applied to input, missing control for maxLength |
```

## Fixing Issues

As you identify issues, categorize them by severity:

- **Critical**: Prevents component usage (e.g., component doesn't render)
- **Major**: Functionality affected (e.g., theme not applied)
- **Minor**: Visual inconsistency but functionality works
- **Documentation**: Issues with prop documentation or examples

Record these in the test report and create appropriate tickets for fixing.

## Special Considerations for Specific Components

### Form Components

- Test validation states across themes
- Verify focus states are themed correctly
- Check error message styling in all themes

### Navigation Components

- Test active/inactive states in all themes
- Verify hover states are consistent

### Media Components

- Test with different aspect ratios
- Verify media controls are themed correctly

## Conclusion

Thorough component testing ensures a consistent user experience across all themes and device sizes. By systematically testing each component using this guide, we can maintain high quality standards for our component library. 