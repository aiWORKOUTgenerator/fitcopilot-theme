/**
 * Button Component Styles
 * 
 * Using design system tokens for consistency
 */

// Import design system once
@use '../../../styles/design-system/index' as *;

// Build on top of the base .btn styles from design system
.button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    border: none;
    border-radius: var(--radius-md);
    font-family: var(--font-sans);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-standard);
    outline: none;
    white-space: nowrap;

    &:focus-visible {
        box-shadow: var(--shadow-focus-ring);
    }

    &:disabled {
        opacity: var(--opacity-disabled);
        cursor: not-allowed;
    }

    // Size variants
    &--small {
        height: var(--size-btn-sm);
        padding: 0 var(--spacing-4);
        font-size: var(--type-small);
    }

    &--medium {
        height: var(--size-btn-md);
        padding: 0 var(--spacing-6);
        font-size: var(--type-base);
    }

    &--large {
        height: var(--size-btn-lg);
        padding: 0 var(--spacing-8);
        font-size: var(--type-lg);
    }

    // Color variants - Using a lower specificity approach to allow overrides
    // The use of :where() reduces specificity while maintaining selector grouping
    &:where(&--primary) {
        background-color: var(--color-primary, #7c3aed);
        color: var(--color-text-inverse, white);

        &:hover:not(:disabled) {
            filter: brightness(1.05);
        }

        &:active:not(:disabled) {
            filter: brightness(0.95);
        }
    }

    &:where(&--secondary) {
        background-color: var(--color-secondary, #e5e7eb);
        color: var(--color-text, #111827);

        &:hover:not(:disabled) {
            filter: brightness(1.05);
        }

        &:active:not(:disabled) {
            filter: brightness(0.95);
        }
    }

    &:where(&--tertiary) {
        background-color: transparent;
        color: var(--color-primary, #7c3aed);
        border: 1px solid var(--color-primary, #7c3aed);

        &:hover:not(:disabled) {
            background-color: rgba(var(--color-primary-rgb, 124, 58, 237), 0.05);
        }

        &:active:not(:disabled) {
            background-color: rgba(var(--color-primary-rgb, 124, 58, 237), 0.1);
        }
    }

    &:where(&--ghost) {
        background-color: transparent;
        color: var(--color-text, #111827);

        &:hover:not(:disabled) {
            background-color: var(--color-hover-light, rgba(0, 0, 0, 0.05));
        }

        &:active:not(:disabled) {
            background-color: var(--color-active-light, rgba(0, 0, 0, 0.1));
        }
    }

    // Fullwidth
    &--fullwidth {
        width: 100%;
    }

    // Loading state
    &--loading {
        color: transparent;

        .button__spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin-top: -10px;
            margin-left: -10px;
            border: 2px solid currentColor;
            border-top-color: transparent;
            border-radius: var(--radius-full);
            animation: button-spin 0.8s linear infinite;
        }

        .button__icon {
            opacity: 0;
        }
    }

    // Icons
    &__icon {
        display: flex;
        align-items: center;
        justify-content: center;

        &--left {
            margin-right: var(--spacing-2);
        }

        &--right {
            margin-left: var(--spacing-2);
        }
    }

    &__text {
        display: inline-block;
    }
}

// Add comments explaining the module intention
// This allows section-specific styles to take precedence 
// by using customization through the themeContext prop
// Example: .button--personal-training will override the base button styles

@keyframes button-spin {
    to {
        transform: rotate(360deg);
    }
}

// Media query for reduced motion preference
@media (prefers-reduced-motion: reduce) {
    .button {
        transition: none;
    }

    .button--loading .button__spinner {
        animation-duration: 2s;
    }
}