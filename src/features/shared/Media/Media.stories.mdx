import { Meta, Story, Preview } from '@storybook/addon-docs';
import { Audio, Video, Gallery, Carousel, DiscriminatedUnion } from './Media.stories';

<Meta title="Shared/Media" />

# Media Component

The `Media` component is a discriminated union that renders different media types based on the `variant` prop. It supports audio, video, image gallery, and carousel variants, each with their own type-safe props.

## Usage

<Preview withToolbar>
  <Story name="DiscriminatedUnion" />
</Preview>

## Variants

### Audio
<Preview>
  <Story name="Audio" />
</Preview>

### Video
<Preview>
  <Story name="Video" />
</Preview>

### Image Gallery
<Preview>
  <Story name="Gallery" />
</Preview>

### Media Carousel
<Preview>
  <Story name="Carousel" />
</Preview>

## Type Guards

The following type guards are available for runtime type safety:

```typescript
isAudioMedia(props: MediaProps): props is AudioMediaProps
isVideoMedia(props: MediaProps): props is VideoMediaProps
isImageMedia(props: MediaProps): props is ImageMediaProps
isYouTubeMedia(props: MediaProps): props is YouTubeMediaProps
isImageGallery(props: MediaProps): props is ImageGalleryProps
isMediaCarousel(props: MediaProps): props is MediaCarouselProps
```

## Accessibility
- All media elements use semantic HTML (`<audio>`, `<video>`, `<img>`, etc.)
- ARIA labels and alt text are supported for screen readers
- Keyboard navigation is supported for galleries and carousels

## Type Safety
- All variants are fully type-safe with discriminated union props
- No `any` types are used in the implementation
- Type guards ensure correct rendering and prop validation at runtime

## Example: Discriminated Union Pattern

```tsx
<Media variant="audio" src="audio.mp3" />
<Media variant="video" src="video.mp4" poster="poster.png" />
<Media variant="imageGallery" images={[{ src: 'img1.png' }, { src: 'img2.png' }]} />
<Media variant="carousel" items={[{ type: 'image', src: 'img1.png' }, { type: 'video', src: 'video1.mp4' }]} />
``` 