@import "../../../styles/theme.scss";
@import "../../../styles/design-system/index.scss";

.personal-training-section {
    position: var(--pos-pt-relative);
    overflow: var(--overflow-pt-hidden);
    padding: var(--spacing-8) 0;
    background-color: var(--color-pt-section-bg);

    // Grid pattern background
    &::before {
        content: var(--content-pt-empty);
        position: var(--pos-pt-absolute);
        top: var(--pos-pt-top-0);
        left: var(--pos-pt-left-0);
        right: var(--pos-pt-right-0);
        bottom: var(--pos-pt-bottom-0);
        background:
            linear-gradient(to right, var(--color-pt-grid-line) 1px, transparent 1px) var(--pos-pt-bg-center) / var(--size-pt-grid-pattern) var(--size-pt-grid-pattern),
            linear-gradient(to bottom, var(--color-pt-grid-line) 1px, transparent 1px) var(--pos-pt-bg-center) / var(--size-pt-grid-pattern) var(--size-pt-grid-pattern);
        pointer-events: var(--pointer-pt-none);
        z-index: var(--z-pt-minus-1);
    }

    .section-title {
        margin-bottom: var(--spacing-8);
        text-align: center;
        font-size: clamp(2rem, 4vw, var(--type-3xl));
        font-weight: var(--weight-black);

        .highlight {
            color: var(--color-primary);
        }
    }

    .trainers-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: var(--spacing-6);
        max-width: var(--container-max-width);
        margin: 0 auto;
        padding: 0 var(--spacing-4);
    }

    // Trainer card
    .trainer-card {
        position: var(--pos-pt-relative);
        background-color: var(--color-pt-card-bg);
        border-radius: var(--radius-pt-card);
        padding: var(--spacing-pt-card-padding);
        transition: transform var(--duration-pt-transition) var(--ease-pt-transition),
            box-shadow var(--duration-pt-transition) var(--ease-pt-transition),
            border-color var(--duration-pt-transition) var(--ease-pt-transition);
        border: var(--border-pt-width) solid var(--color-border);
        backdrop-filter: blur(var(--size-pt-backdrop-blur));

        &:hover {
            transform: translateY(var(--transform-pt-card-hover-y));
            box-shadow: var(--shadow-pt-card-hover);
            border-color: var(--color-pt-card-border-hover);

            .trainer-image img {
                transform: scale(var(--transform-pt-img-hover-scale));
            }

            .book-button .icon {
                transform: translateX(var(--transform-pt-button-icon-x));
            }
        }
    }

    // Trainer image
    .trainer-image {
        width: var(--width-pt-img-full);
        height: var(--height-pt-trainer-img);
        border-radius: var(--radius-pt-img);
        overflow: var(--overflow-pt-hidden);
        margin-bottom: var(--spacing-pt-img-bottom);

        img {
            width: var(--width-pt-img-full);
            height: var(--height-pt-trainer-img);
            object-fit: var(--object-fit-pt-cover);
            transition: transform var(--duration-pt-transition) var(--ease-pt-transition);
            filter: var(--filter-pt-img);
        }

        // Image placeholder
        .image-placeholder {
            width: var(--width-pt-img-full);
            height: var(--height-pt-trainer-img);
            background-color: var(--color-gray-800);
            display: var(--display-pt-flex);
            align-items: var(--align-pt-center);
            justify-content: var(--justify-pt-center);

            svg {
                opacity: var(--opacity-pt-placeholder-icon);
                filter: var(--filter-pt-icon-shadow);
            }
        }
    }

    // Trainer specialty badge
    .specialty {
        display: var(--display-pt-inline-flex);
        align-items: var(--align-pt-center);
        padding: var(--padding-pt-badge-y) var(--padding-pt-badge-x);
        border-radius: var(--radius-pt-badge);
        font-size: var(--size-pt-badge-font);
        font-weight: var(--weight-pt-badge);
        text-transform: var(--transform-pt-text-uppercase);
        letter-spacing: var(--letter-spacing-pt-badge);
        background-color: var(--color-pt-badge-bg);
        color: var(--color-primary);
        margin-bottom: var(--spacing-pt-badge-bottom);

        .icon {
            margin-right: var(--spacing-pt-badge-icon-right);
        }
    }

    // Trainer name
    .trainer-name {
        font-size: var(--size-pt-name);
        font-weight: var(--weight-pt-name);
        margin-bottom: var(--spacing-pt-name-bottom);
        color: var(--color-text);
    }

    // Trainer bio
    .trainer-bio {
        font-size: var(--size-pt-bio);
        line-height: var(--line-height-pt-bio);
        margin-bottom: var(--spacing-pt-bio-bottom);
        color: var(--color-text-secondary);
    }

    // Trainer stats
    .trainer-stats {
        display: var(--display-pt-grid);
        grid-template-columns: var(--grid-pt-cols-2);
        gap: var(--spacing-pt-grid-gap);
        margin-bottom: var(--spacing-pt-stats-bottom);

        .stat {
            text-align: var(--text-align-pt-center);

            .value {
                font-size: var(--size-pt-stat-value);
                font-weight: var(--weight-pt-stat-value);
                color: var(--color-primary);
                display: var(--display-pt-block);
                margin-bottom: var(--spacing-pt-stat-value-bottom);
            }

            .label {
                font-size: var(--size-pt-stat-label);
                color: var(--color-text-secondary);
            }
        }
    }

    // Book button
    .book-button {
        width: var(--width-pt-button-full);
        padding: var(--padding-pt-button-y) var(--padding-pt-button-x);
        display: var(--display-pt-flex);
        align-items: var(--align-pt-center);
        justify-content: var(--justify-pt-center);
        background-color: var(--color-primary);
        color: var(--color-pt-button-text);
        border-radius: var(--radius-pt-button);
        font-weight: var(--weight-pt-button);
        transition: transform var(--duration-pt-transition) var(--ease-pt-transition),
            box-shadow var(--duration-pt-transition) var(--ease-pt-transition);

        &:hover {
            transform: translateY(var(--transform-pt-button-hover-y));
            box-shadow: var(--shadow-pt-button-hover);
        }

        .icon {
            margin-left: var(--spacing-pt-button-icon-left);
            transition: transform var(--duration-pt-transition) var(--ease-pt-transition);
        }
    }

    // Booking consultation box
    .booking-box {
        position: var(--pos-pt-relative);
        border-radius: var(--radius-pt-booking-box);
        overflow: var(--overflow-pt-hidden);
        padding: var(--padding-pt-booking-y) var(--padding-pt-booking-x);
        margin-top: var(--spacing-16);
        background: var(--gradient-primary);
        max-width: var(--container-max-width);
        margin-left: auto;
        margin-right: auto;

        &::before {
            content: var(--content-pt-empty);
            position: var(--pos-pt-absolute);
            top: var(--pos-pt-top-0);
            left: var(--pos-pt-left-0);
            right: var(--pos-pt-right-0);
            bottom: var(--pos-pt-bottom-0);
            background:
                linear-gradient(45deg, transparent var(--size-pt-pattern), rgba(255, 255, 255, 0.05) var(--size-pt-pattern), transparent var(--size-pt-pattern));
            background-size: var(--size-pt-pattern) var(--size-pt-pattern);
            animation: patternMove var(--animation-pt-pattern-duration) var(--animation-pt-pattern-timing) var(--animation-pt-pattern-iteration);
            pointer-events: var(--pointer-pt-none);
        }
    }

    .booking-title {
        font-size: var(--size-pt-booking-title);
        font-weight: var(--weight-pt-booking-title);
        margin-bottom: var(--spacing-pt-booking-title-bottom);
        text-align: var(--text-align-pt-center);
        color: var(--color-pt-white);
        text-shadow: var(--shadow-pt-text);
    }

    .booking-text {
        font-size: var(--size-pt-booking-text);
        line-height: var(--line-height-pt-booking-text);
        margin-bottom: var(--spacing-pt-booking-text-bottom);
        text-align: var(--text-align-pt-center);
        color: var(--color-pt-white-90);
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }

    .booking-button {
        display: var(--display-pt-inline-flex);
        align-items: var(--align-pt-center);
        padding: var(--padding-pt-booking-button-y) var(--padding-pt-booking-button-x);
        background-color: var(--color-pt-booking-button-bg);
        color: var(--color-secondary);
        border-radius: var(--radius-pt-booking-button);
        font-weight: var(--weight-pt-button);
        margin: 0 auto;
        display: block;
        box-shadow: var(--shadow-pt-booking-button);
        transition: transform var(--duration-pt-transition) var(--ease-pt-transition),
            box-shadow var(--duration-pt-transition) var(--ease-pt-transition);

        &:hover {
            transform: translateY(var(--transform-pt-booking-button-hover-y));
            box-shadow: var(--shadow-pt-booking-button-hover);
        }

        .icon {
            margin-left: var(--spacing-pt-booking-button-icon-left);
        }
    }

    // Flip card
    .flip-card-container {
        margin-top: var(--spacing-pt-flip-card-top);
    }

    .flip-card {
        perspective: var(--perspective-pt-flip-card);
        height: var(--height-pt-flip-card);
        position: var(--pos-pt-relative);
        transform-style: var(--transform-style-pt-3d);
        transition: var(--transition-pt-flip);
        cursor: var(--cursor-pt-pointer);

        &.flipped {
            .flip-card-inner {
                transform: var(--transform-pt-flip-y-180);
            }
        }

        .flip-card-inner {
            position: var(--pos-pt-relative);
            width: var(--width-pt-img-full);
            height: var(--height-pt-trainer-img);
            transform-style: var(--transform-style-pt-3d);
            transition: var(--transition-pt-flip);
        }

        .flip-card-front,
        .flip-card-back {
            position: var(--pos-pt-absolute);
            width: var(--width-pt-img-full);
            height: var(--height-pt-trainer-img);
            backface-visibility: var(--backface-pt-hidden);
            border-radius: var(--radius-pt-img);
            overflow: var(--overflow-pt-hidden);
            box-shadow: var(--shadow-pt-flip-card);
        }

        .flip-card-front {
            transform: var(--transform-pt-flip-y-0);
            background-color: var(--color-gray-800);

            img {
                width: var(--width-pt-img-full);
                height: var(--height-pt-trainer-img);
                object-fit: var(--object-fit-pt-cover);
            }

            .overlay {
                position: var(--pos-pt-absolute);
                top: var(--pos-pt-top-0);
                left: var(--pos-pt-left-0);
                right: var(--pos-pt-right-0);
                bottom: var(--pos-pt-bottom-0);
                background: var(--gradient-pt-overlay);
                display: var(--display-pt-flex);
                flex-direction: var(--display-pt-flex-column);
                justify-content: var(--justify-pt-flex-end);
                padding: var(--padding-pt-overlay);

                .flip-title {
                    font-size: var(--size-pt-flip-title);
                    font-weight: var(--weight-pt-flip-title);
                    margin-bottom: var(--spacing-pt-flip-title-bottom);
                    color: var(--color-pt-white);
                }

                .flip-hint {
                    display: var(--display-pt-flex);
                    align-items: var(--align-pt-center);
                    color: var(--color-pt-white-80);
                    font-size: var(--size-pt-flip-hint);

                    .icon {
                        margin-right: var(--spacing-pt-flip-hint-icon-left);
                    }
                }
            }
        }

        .flip-card-back {
            transform: var(--transform-pt-flip-y-180);
            background-color: var(--color-pt-card-back-bg);
            display: var(--display-pt-flex);
            flex-direction: var(--display-pt-flex-column);

            .video-content {
                position: var(--pos-pt-relative);
                flex-grow: var(--flex-pt-grow);
                display: var(--display-pt-flex);
                align-items: var(--align-pt-center);
                justify-content: var(--justify-pt-center);
            }

            .video-controls {
                display: var(--display-pt-flex);
                align-items: var(--align-pt-center);
                justify-content: var(--justify-pt-space-between);
                padding: var(--padding-pt-controls);
                background-color: var(--color-pt-controls-bg);
            }

            .control-button {
                background: transparent;
                border: var(--border-pt-none);
                width: var(--size-pt-control-button);
                height: var(--size-pt-control-button);
                border-radius: var(--radius-pt-round);
                display: var(--display-pt-flex);
                align-items: var(--align-pt-center);
                justify-content: var(--justify-pt-center);
                color: var(--color-pt-white);
                transition: background-color var(--duration-pt-control-transition) var(--ease-pt-transition);

                &:hover {
                    background-color: var(--color-pt-control-hover-bg);
                }
            }
        }
    }
}

// Animation for pattern
@keyframes patternMove {
    0% {
        background-position: 0 0;
    }

    100% {
        background-position: var(--size-pt-pattern) var(--size-pt-pattern);
    }
}

// Accessibility: Reduced motion preference
@media (prefers-reduced-motion) {
    .personal-training-section {
        .booking-box::before {
            animation: none;
        }

        .flip-card {
            .flip-card-inner {
                transition: transform 0.5s ease;
            }
        }

        .trainer-card {
            transition: transform 0.5s ease, box-shadow 0.5s ease, border-color 0.5s ease;

            &:hover {
                .trainer-image img {
                    transform: none;
                }
            }
        }
    }
}